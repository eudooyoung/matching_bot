<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>로그인</title>
    <link rel="stylesheet" href="/css/layout.css"/>
    <link rel="stylesheet" href="/css/login.css"/>
</head>
<body>

<!-- 공통 헤더 -->
<div th:replace="~{fragments/header :: header(role=${role})}"></div>


<div class="login-container">
    <div class="tab-buttons">
        <button id="member-tab" class="active" onclick="showForm('member')">개인 회원</button>
        <button id="company-tab" onclick="showForm('company')">기업 회원</button>
    </div>

    <!-- 개인 회원 로그인 폼 -->
    <form id="member-form" class="login-form active">
        <label for="email">이메일</label>
        <input type="email" id="email" name="email" required/>
        <label for="password">비밀번호</label>
        <input type="password" id="password" name="password" required/>
        <button type="submit">로그인</button>
        <div class="error-msg" id="error-msg" style="color: red; margin-top: 1rem;"></div>
    </form>

    <!-- 기업 회원 로그인 폼 -->
    <form method="post" class="login-form" id="company-form">
        <label for="email2">이메일</label>
        <input type="email" id="email2" name="email" required/>
        <label for="password2">비밀번호</label>
        <input type="password" id="password2" name="password" required/>
        <button type="submit">로그인</button>
        <div class="error-msg" id="error-msg2" style="color: red; margin-top: 1rem;"></div>
    </form>
</div>

<!-- 공통 푸터 -->
<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    function showForm(type) {
        const memberTab = document.getElementById("member-tab");
        const companyTab = document.getElementById("company-tab");
        const memberForm = document.getElementById("member-form");
        const companyForm = document.getElementById("company-form");

        if (type === "member") {
            memberTab.classList.add("active");
            companyTab.classList.remove("active");
            memberForm.classList.add("active");
            companyForm.classList.remove("active");
        } else {
            companyTab.classList.add("active");
            memberTab.classList.remove("active");
            companyForm.classList.add("active");
            memberForm.classList.remove("active");
        }
    }

    document.getElementById("member-form").addEventListener("submit", function (e) {
        e.preventDefault();
        handleLogin("email", "password", "error-msg", "MEMBER");
    });

    document.getElementById("company-form").addEventListener("submit", function (e) {
        e.preventDefault();
        handleLogin("email2", "password2", "error-msg2", "COMPANY");
    });
</script>

<script th:src="@{/js/dropdown.js}"></script>
<script th:src="@{/js/auth/loginHandler.js}"></script>
</body>
</html>
