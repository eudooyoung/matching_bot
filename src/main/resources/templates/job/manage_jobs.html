<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>채용 공고 관리</title>
    <link rel="stylesheet" th:href="@{/css/manage_jobs.css}" />
</head>
<body>
<div class="navbar">
    <a href="/main" class="logo">MatchingBot</a>
    <div class="nav-links">
        <a href="#">커뮤니티</a>
        <a href="#">마이페이지</a>
        <span class="username">홍길동</span>
    </div>
</div>
<div class="container">
    <h2>채용 공고 관리</h2>

    <button class="register-btn" onclick="location.href='/job-postings/new'">공고 등록하기</button>

    <table class="job-table">
        <thead>
        <tr>
            <th>번호</th>
            <th>채용 공고 제목</th>
            <th>채용 기간</th>
            <th>상세보기</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="job, iterStat : ${jobList}">
            <td th:text="${iterStat.count}"></td>
            <td th:text="${job.title}"></td>
            <td>
                <span th:text="${job.startDate}"></span> ~
                <span th:text="${job.endDate}"></span>
            </td>
            <td>
                <a th:href="@{/job-postings/{id}(id=${job.id})}" class="btn">수정</a>
                <button class="btn delete-btn" th:attr="data-id=${job.id}" onclick="deleteJob(this)">삭제</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script>
    function deleteJob(button) {
        const id = button.getAttribute("data-id");
        if (confirm("정말 삭제하시겠습니까?")) {
            fetch(`/job-postings/${id}`, {
                method: 'DELETE'
            }).then(() => {
                alert("삭제되었습니다.");
                location.reload();
            });
        }
    }
</script>
</body>
</html>